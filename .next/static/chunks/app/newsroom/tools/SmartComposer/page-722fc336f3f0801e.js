(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[79],{1162:(e,t,r)=>{"use strict";r.d(t,{N:()=>i});var s=r(9898);let l="https://lbqrkohwozvtyyokwjfg.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxicXJrb2h3b3p2dHl5b2t3amZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY2MDgwOTMsImV4cCI6MjA2MjE4NDA5M30.DGGJLSuzjk9123if5T1Ae0ELVgKdOmEQStPBfnHbF8Y";if(!l||!a)throw Error("❌ Missing Supabase environment variables");let i=(0,s.UU)(l,a)},1959:(e,t,r)=>{Promise.resolve().then(r.bind(r,6183))},6183:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var s=r(6384),l=r(9956),a=r(6636),i=r(8942);let n=a.forwardRef((e,t)=>{let{className:r,type:l,...a}=e;return(0,s.jsx)("input",{type:l,className:(0,i.cn)("flex h-10 w-full rounded-md border border-white/10 bg-black/20 px-3 py-2 text-sm text-white placeholder:text-white/40 shadow-sm outline-none focus:ring-2 focus:ring-drn-green disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});n.displayName="Input";let o=a.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-white/10 bg-black/20 px-3 py-2 text-sm text-white placeholder:text-white/40 shadow-sm outline-none focus:ring-2 focus:ring-drn-green disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...l})});o.displayName="Textarea";var d=r(8033),c=r(1162);async function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"uploads";if(!e)return null;let r=e.name.split(".").pop(),s="".concat(t,"/").concat(Date.now(),".").concat(r),{error:l}=await c.N.storage.from("media").upload(s,e);if(l)return console.error("❌ Upload error:",l),null;let{data:a}=c.N.storage.from("media").getPublicUrl(s);return(null==a?void 0:a.publicUrl)||null}var m=r(1226),h=r(2880),p=r(6569),x=r(1789);function b(){let{register:e,handleSubmit:t,reset:r}=(0,l.mN)(),[i,b]=(0,a.useState)(null),[f,g]=(0,a.useState)(!1),[w,j]=(0,a.useState)(!1),N=async e=>{g(!0),j(!1);let t=null;i&&(t=await u(i,"smartcomposer"));let{error:s}=await c.N.from("posts").insert([{...e,media_url:t}]);g(!1),s?alert("❌ Failed to publish post: "+s.message):(j(!0),r(),b(null))};return(0,s.jsxs)("div",{className:"glass-card space-y-6 max-w-5xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-drn-blue",children:"Smart Composer"}),(0,s.jsxs)("form",{onSubmit:t(N),className:"space-y-4",children:[(0,s.jsx)(n,{placeholder:"Post Title",...e("title",{required:!0})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(n,{placeholder:"Category",...e("category",{required:!0})}),(0,s.jsx)(n,{placeholder:"Location",...e("location")})]}),(0,s.jsx)(o,{placeholder:"Write a brief summary...",...e("summary")}),(0,s.jsxs)("label",{htmlFor:"media",className:"flex flex-col items-center justify-center cursor-pointer border border-dashed border-white/20 rounded-xl p-8 bg-black/10 text-white/60 hover:border-drn-green hover:text-white transition",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center gap-1 mb-2",children:[(0,s.jsx)(m.A,{className:"w-6 h-6"}),(0,s.jsx)(h.A,{className:"w-5 h-5 text-muted-foreground"})]}),i?(0,s.jsx)("span",{children:i.name}):(0,s.jsx)("p",{children:"Click to upload image or video"}),(0,s.jsx)("input",{id:"media",type:"file",accept:"image/*,video/*",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];r&&b(r)},className:"hidden"})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)(d.$,{type:"submit",disabled:f,children:[(0,s.jsx)(p.A,{className:"w-4 h-4 mr-1"}),f?"Publishing...":"Publish"]}),w&&(0,s.jsxs)("div",{className:"text-drn-green flex items-center gap-1 text-sm",children:[(0,s.jsx)(x.A,{className:"w-4 h-4"}),"Post published!"]})]})]})]})}},8033:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});var s=r(6384),l=r(6636),a=r(8942);let i=l.forwardRef((e,t)=>{let{className:r,variant:l="default",...i}=e;return(0,s.jsx)("button",{className:(0,a.cn)("inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium transition focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{default:"bg-drn-blue text-white hover:bg-blue-800",secondary:"bg-white text-black hover:bg-drn-green",ghost:"bg-transparent hover:bg-white/10 text-white"}[l],r),ref:t,...i})});i.displayName="Button"},8942:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var s=r(4534),l=r(9862);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,l.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[898,16,478,309,951,358],()=>t(1959)),_N_E=e.O()}]);